<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>Afficher commentaires</title>
    <link rel="stylesheet" href="css.css" type="text/css">
</head>
<body>
    <main id="app">
        <p>Il y a {{ nbCommentaires }} commentaires dans la base.</p>
        <div v-for="commentaire in commentaires" :key="commentaire.id_message"> 
            <p>message : {{ commentaire.message }}</p>
            <p>Id evenement : {{ commentaire.id_evenement }}</p>
        </div>
        <p><br /></p>
    </main>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const Commentaires = {
            data() {
                return {
                    auteur: "Charlotte",
                    commentaires: []
                }    
            },
            created()  {
                fetch('http://localhost:8080/Projet_Servlet/commentaires?operation=listeCommentaires')
                    .then((response) => response.json())
                    .then((json) => {this.commentaires = json});
            },
            computed: {
                nbCommentaires() {
                    return this.commentaires.length
                }
            }
        }
        const app = Vue.createApp(Commentaires).mount('#app')
    </script>
</body>
</html>
